name: "On Opening Issue"
on:
  issues:
    types: [opened, reopened]
jobs:
  initalise-epic:
    strategy:
        matrix:
          listtype: [Features, Stories]
    if: startsWith(github.event.issue.title, '[EPIC]')
    uses: ./.github/workflows/create-issue-list.yml
    with:
      issuetype: Epic
      listtype: ${{ matrix.listtype }}
  initalise-feature:
    if: startsWith(github.event.issue.title, '[FEATURE]')
    uses: ./.github/workflows/create-issue-list.yml
    with:
      issuetype: Feature
      listtype: Stories
  initalise-story:
    if: startsWith(github.event.issue.title, '[STORY]')
    runs-on: ubuntu-latest
    steps:
      - uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: |
            pipelines
            story
  # add-to-project:
  #   name: Add issue to project
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Assign issues to the AIS project
  #       uses: actions/add-to-project@v0.3.0
  #       with:
  #         project-url: https://github.com/orgs/Australian-Imaging-Service/projects/2
  #         github-token: ${{ secrets.AIS_ADMIN_KEY }}
